# Random Users App

### Описание

Приложение загружает случайных пользователей из внешнего API https://randomuser.me/ и хранит их в базе данных.

### Функционал

- Автоматическая загрузка 1000 пользователей при старте сервера
- Пагинированный просмотр списка пользователей
- Детальная страница пользователя (`GET /users/{id}`)
- Эндпоинт случайного пользователя (`GET /users/random`)

### Технологии

#### Бэкенд

**FastAPI** — современный асинхронный фреймворк, обеспечивающий высокую производительность и минимальный «боилерплейт» при описании REST-API. FastAPI выбран за быструю обработку большого числа запросов и простую работу с асинхронностью.

#### База данных

**PostgreSQL** — надёжная реляционная СУБД.
Выбран для устойчивого хранения большого количества записей и выполнения сложных выборок (например, пагинации и фильтрации) с минимальными накладными расходами.

#### Фронтенд

**React** — популярная библиотека для построения пользовательского интерфейса.
**Vite** — быстрый сборщик и dev-сервер с поддержкой HMR.
Этот стек выбран для создания отзывчивого и интерактивного фронтенда: React позволяет организовать UI в виде переиспользуемых компонентов, а Vite обеспечивает быстрый цикл разработки.

### Быстрый старт

1. Клонировать репозиторий и перейти в каталог проекта:

```bash
git clone https://github.com/nlsnnn/random-users.git
cd random-users
```

2. Скопировать файл с примером переменных окружения:

```bash
cp .env.example .env
```

3. Прописать свои значения в .env

4. Запустить все сервисы через Docker Compose:

```bash
docker-compose up --build
```

5. Открыть в браузере:

- Backend API: http://localhost:8000/docs
- Frontend: http://localhost/

### Переменные окружения

Файл .env (корень проекта) должен содержать:

```ini
# доступ к БД
POSTGRES_USER=postgres
POSTGRES_PASSWORD=1234
POSTGRES_DB=random_users

APPLICATION__DB__URL=postgresql+asyncpg://postgres:1234@db:5432/random_users
APPLICATION__RANDOM_USER_API__URL=https://randomuser.me/api/

# URL для фронтенда (VITE)
VITE_API_URL=http://localhost:80/api/
```

### Эндпоинты API

| Метод | Маршрут                           | Описание                                       |
| ----- | --------------------------------- | ---------------------------------------------- |
| GET   | `/users/?page={page}&size={size}` | Получить список пользователей с пагинацией     |
| GET   | `/users/{id}`                     | Детальная информация по пользователю с ID      |
| GET   | `/users/random`                   | Случайный пользователь                         |
| POST  | `/users/`                         | Добавить N пользователей (JSON: `{"count":X}`) |

Документация Swagger доступна по /docs.

### Запуск тестов

В контейнере api тесты покрывают CRUD-операции, эндпоинты и сервис (внешнее API мокается):

```bash
docker-compose exec api pytest -q
```

### Локальная разработка

Backend:

```bash
cd backend
pip install -r requirements.txt
cp app/.env.example app/.env
uvicorn app.main:app --reload
```

Frontend:

```bash
cd frontend
npm install
npm run dev
```
